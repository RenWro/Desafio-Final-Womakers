{% load static %}
{% load bootstrap5 %}


<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Perfil do Cliente</title>
    <link rel="stylesheet" href="{% static 'css\detalhes_carrinho.css' %}">
    <link    href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

  </head>
 
  <body>
    <header class="container">
      <div class="row">
        <a class="col-2" href="/">
          <div class="logo-img-container">
            <img class="img-fluid" src="{% static './assets/img/logo.png' %}" alt="" width="197" height="137">
          </div>
                  </a>
      </div>
    </header>

    <main>
      <span class="separator"></span>
      
      {% if carrinho_vazio %}

      {{ carrinho }}
    
      {% else %}
      
        <div class="page-title"><h1>Detalhes do carrinho</h1></br>
      
          <h2 class="card-title">Olá {{ cliente.nome }}! </h2> 
          <div class="content">
            <table class="table table-hover">  
              <thead>
                <tr>
                  <th scope="col">Livro</th>
                  <th scope="col">Titulo</th>
                  <th scope="col">Preço unitário</th>
                  <th scope="col">Quantidade</th>
                  <th scope="col">Subtotal</th>                  
                </tr>
            </thead>
            <tbody>
              {% for item in carrinho %}
              <tr>
                <td>
                  <div class="product-info">
                    <img class="img-fluid" src="{% static 'media/' %}{{ livro.imagem_capa }}" alt="{{ livro.titulo }}" width="150" height="150">
                  </div>
                    <div class="details">
                      <p class="product-name">{{ item.titulo }}</p>
                    </div>
                </td>
                <td> {{ item.valor }}</td>  <td>
                  <td>
                    <form action="/pedido/excluir_item_carrinho/" method="POST">
                      {% csrf_token %}
                      <input type="hidden" name="livro_id" value="{{ item.id }}">
                      <input type="hidden" name="carrinho_id" value="{{ carrinho.id }}">
                      <div class="qty">
                        <button class="btn-sm btn-light" type="submit"><i class="bx bx-minus"></i></button>
                        <span class="quantity-value">{{ item.quantidade }}</span>
                        <button class="btn-sm btn-light" type="submit"><i class="bx bx-plus"></i></button>
                      </div>
                    </form>
                  </td>
                  <td>
                    <form action="/pedido/excluir_item_carrinho/" method="POST">
                      {% csrf_token %}
                      <input type="hidden" name="livro_id" value="{{ item.id }}">
                      <input type="hidden" name="carrinho_id" value="{{ carrinho.id }}">
                      <button class="btn-sm btn-danger remove-item" type="submit"><i class="bx bx-x"></i></button>
                    </form>
                  </td>
                </td>
                <td>R$ { subtotal } </td> 
                <td>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>

        <div class="cart-summary">
          <br>
            <p>R$ { subtotal } </p>
          </br>
          <br>
            <p>Valor Total: </p>
          </br>
          <br>
            <a href=" " class="btn btn-primary btn-lg">Finalizar compra</a>
          </br>
        </div>
      </div>
    {% endif %}
  </main>

  <footer class="container">
    <span class="separator">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
      Copyright Womakers 2024. Todos os direitos reservados.
    </span>
  </footer>